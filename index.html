<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ingeniería Barack</title>
    <link rel="stylesheet" href="styles.css">
</head>
  <body class="home">
      <nav class="main-nav">
          <a href="index.html" aria-current="page">Inicio</a>
          <a href="sinoptico.html">Sinóptico</a>
          <a href="admin_menu.html" id="editSinLink" style="display:none">Editar sinóptico</a>
          <a href="listado_maestro.html">Listado maestro</a>
          <a href="insumos.html">Insumos</a>
          <a href="usuarios.html" id="usersLink" style="display:none">Usuarios</a>
          <a href="login.html" id="loginLink">Log in</a>
          <button id="toggleTheme">🌙</button>
      </nav>
      <header>
          <section class="hero">
              <img src="images/LOGO BARACK.png" alt="Logo Barack" class="logo">
              <h1>Ingeniería Barack</h1>
              <a class="btn-link" href="sinoptico.html">Ver Sinóptico de Producto</a>
              <a class="btn-link" href="listado_maestro.html">Listado maestro</a>
              <a class="btn-link" href="amfe_proceso_ultra.html">AMFE de proceso</a>
        </section>
      </header>
      <main class="intro">
          <ul class="features">
            <li>Consulta del sinóptico de productos</li>
            <li>Listado maestro de ingeniería</li>
            <li>Datos actualizados automáticamente</li>
          </ul>
          <div id="adminDataBtns" style="display:none">
            <button id="btnExportJson" aria-label="Exportar datos">Exportar datos</button>
            <input type="file" id="inputImportJson" accept=".json" style="display:none">
            <button id="btnImportJson" aria-label="Importar datos">Importar datos</button>
          </div>
      </main>
      <script src="sha256.min.js"></script>
  <script src="auth.js"></script>
      <script src="theme.js" defer></script>
      <script src="smooth-nav.js" defer></script>
      <script src="renderer.js" defer></script>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          document.querySelector('main').classList.add('fade-in');
          const link = document.getElementById('loginLink');
          const editLink = document.getElementById('editSinLink');
          const usersLink = document.getElementById('usersLink');
          const adminBtns = document.getElementById('adminDataBtns');
          function update() {
            const logged = sessionStorage.getItem('isAdmin') === 'true';
            link.textContent = logged ? 'Cerrar sesión' : 'Log in';
            if (editLink) editLink.style.display = logged ? 'inline' : 'none';
            if (usersLink) usersLink.style.display = logged ? 'inline' : 'none';
            if (adminBtns) adminBtns.style.display = logged ? 'block' : 'none';
          }
          auth.restoreSession();
          link.addEventListener('click', e => {
            if (sessionStorage.getItem('isAdmin') === 'true') {
              e.preventDefault();
              auth.logout();
              update();
              window.location.href = 'welcome.html';
            }
          });
          update();
        });
      </script>
  </body>
</html>
