<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ingenier√≠a Barack</title>
    <link rel="stylesheet" href="styles.css">
</head>
  <body class="home">
    <div id="loading">Cargando‚Ä¶</div>
      <nav class="main-nav">
          <a href="index.html" aria-current="page">Inicio</a>
          <a href="sinoptico.html">Sin√≥ptico</a>
          <a href="admin_menu.html" id="editSinLink" style="display:none">Editar sin√≥ptico</a>
          <a href="listado_maestro.html">Listado maestro</a>
          <a href="insumos.html">Insumos</a>
          <a href="usuarios.html" id="usersLink" style="display:none">Usuarios</a>
          <a href="login.html" id="loginLink">Log in</a>
          <button id="toggleTheme">üåô</button>
      </nav>
      <header>
          <section class="hero">
              <img src="images/LOGO BARACK.png" alt="Logo Barack" class="logo">
              <h1>Ingenier√≠a Barack</h1>
              <a class="btn-link" href="sinoptico.html">Ver Sin√≥ptico de Producto</a>
              <a class="btn-link" href="listado_maestro.html">Listado maestro</a>
              <a class="btn-link" href="amfe_proceso_ultra.html">AMFE de proceso</a>
        </section>
      </header>
      <main class="intro">
          <ul class="features">
            <li>Consulta del sin√≥ptico de productos</li>
            <li>Listado maestro de ingenier√≠a</li>
            <li>Datos actualizados autom√°ticamente</li>
          </ul>
          <div id="jsonTools" style="display:none;margin-top:1em;text-align:center;">
            <button id="exportJsonBtn">Exportar JSON</button>
            <input type="file" id="importJsonInput" accept="application/json" />
          </div>
      </main>
  <script src="sha256.min.js"></script>
  <script src="auth.js"></script>
  <script src="file-warning.js"></script>
  <script src="theme.js" defer></script>
      <script src="smooth-nav.js" defer></script>
      <script src="renderer.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/dexie@4/dist/dexie.min.js" onerror="this.onerror=null;this.src='vendor/dexie.min.js'"></script>
  <script type="importmap">
  {
    "imports": {
      "dexie": "./vendor/dexie.min.mjs"
    }
  }
  </script>
  <script type="module" src="js/dataService.js"></script>
  <script type="module" src="js/json_tools.js"></script>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          document.querySelector('main').classList.add('fade-in');
          const link = document.getElementById('loginLink');
          const editLink = document.getElementById('editSinLink');
          const usersLink = document.getElementById('usersLink');
          function update() {
            const logged = sessionStorage.getItem('isAdmin') === 'true';
            link.textContent = logged ? 'Cerrar sesi√≥n' : 'Log in';
            if (editLink) editLink.style.display = logged ? 'inline' : 'none';
            if (usersLink) usersLink.style.display = logged ? 'inline' : 'none';
          }
          auth.restoreSession();
          link.addEventListener('click', e => {
            if (sessionStorage.getItem('isAdmin') === 'true') {
              e.preventDefault();
              auth.logout();
              update();
              window.location.href = 'welcome.html';
            }
          });
          update();
        });
      </script>
      <script>
        window.onload = () => {
          const loader = document.getElementById('loading');
          if (loader) loader.style.display = 'none';
        };
      </script>
  </body>
</html>
